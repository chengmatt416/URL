<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>URL Shortener</title>
  <script>
    async function redirectIfShort() {
      const path = window.location.pathname.split('/').pop();
      if (path && path !== "index.html" && path !== "404.html") {
        try {
          const response = await fetch("/urls.json");
          const map = await response.json();
          if (map[path]) {
            window.location.href = map[path];
            return;
          }
        } catch(e) {
          // fetch error, ignore
        }
        document.body.innerHTML = "<h1>404 Not Found</h1><p>No mapping for <b>" + path + "</b>.</p>";
      } else {
        document.body.innerHTML = "<h1>URL Shortener</h1><p>This is a static URL shortener. To add a new short URL, edit <code>urls.json</code> and redeploy.</p>";
      }
    }
    redirectIfShort();
  </script>
</head>
<body>
</body>
</html>
